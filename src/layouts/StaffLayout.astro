---
/**
 * Staff Portal Layout
 * 
 * Clean, minimal layout for staff-only pages with:
 * - No customer-facing elements (header, footer, WhatsApp, etc.)
 * - Dark theme optimized for work efficiency
 * - Security-focused (no SEO indexing, no analytics)
 * - Essential accessibility features only
 * - Fast loading with minimal dependencies
 */

import '~/assets/styles/tailwind.css';
import { I18N } from 'astrowind:config';

import CommonMeta from '~/components/common/CommonMeta.astro';
import Favicons from '~/components/Favicons.astro';
import CustomStyles from '~/components/CustomStyles.astro';
import ApplyColorMode from '~/components/common/ApplyColorMode.astro';
import BasicScripts from '~/components/common/BasicScripts.astro';

// Essential accessibility components only
import AccessibilityEnhancements from '~/components/common/AccessibilityEnhancements.astro';
import AriaEnhancer from '~/components/common/AriaEnhancer.astro';
import KeyboardNavigationEnhancer from '~/components/common/KeyboardNavigationEnhancer.astro';

import type { MetaData as MetaDataType } from '~/types';

export interface Props {
  metadata?: MetaDataType;
}

const { metadata = {} } = Astro.props;
const { language, textDirection } = I18N;

// Staff-specific metadata (no SEO, no indexing)
const staffMetadata = {
  title: metadata.title || 'Staff Portal - Somerset Window Cleaning',
  robots: {
    index: false,
    follow: false,
  },
  ...metadata,
};
---

<!doctype html>
<html lang={language} dir={textDirection} class="2xl:text-[20px] dark">
  <head>
    <CommonMeta />
    <Favicons />
    <CustomStyles />
    <ApplyColorMode />
    
    <!-- Staff-specific meta (no SEO) -->
    <title>{staffMetadata.title}</title>
    <meta name="robots" content="noindex, nofollow" />
    <meta name="description" content="Staff portal for Somerset Window Cleaning team members only." />
    
    <!-- Security headers -->
    <meta http-equiv="X-Frame-Options" content="DENY" />
    <meta http-equiv="X-Content-Type-Options" content="nosniff" />
    <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin" />
    
    <!-- Dark theme enforcement for staff portal -->
    <meta name="color-scheme" content="dark" />
    <meta name="theme-color" content="#111827" />
    
    <!-- Viewport optimized for desktop/tablet work -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  </head>

  <body class="min-h-screen bg-gray-900 text-white antialiased">
    <!-- Staff Portal Content -->
    <slot />

    <!-- Essential scripts only -->
    <BasicScripts />
    
    <!-- Accessibility enhancements (essential for compliance) -->
    <AccessibilityEnhancements />
    <AriaEnhancer />
    <KeyboardNavigationEnhancer />

    <!-- Staff portal specific styles -->
    <style is:global>
      /* Force dark theme for staff portal */
      html.dark {
        color-scheme: dark;
      }
      
      /* Override any light theme styles */
      body {
        background-color: #111827 !important;
        color: #ffffff !important;
      }
      
      /* Focus styles for better accessibility in dark theme */
      *:focus-visible {
        outline: 2px solid #3b82f6;
        outline-offset: 2px;
        border-radius: 4px;
      }
      
      /* Enhanced contrast for staff work */
      .staff-content {
        color: #f9fafb;
        background-color: #111827;
      }
      
      /* High contrast borders for cards/sections */
      .staff-card {
        border-color: #374151 !important;
        background-color: #1f2937 !important;
      }
      
      /* Ensure good readability for extended use */
      .text-gray-300 {
        color: #d1d5db !important;
      }
      
      .text-gray-400 {
        color: #9ca3af !important;
      }
    </style>
  </body>
</html>