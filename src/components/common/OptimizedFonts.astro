---
/**
 * Optimized Font Loading Component
 * 
 * Features:
 * - Self-hosted fonts for better performance
 * - font-display: swap for faster text rendering
 * - Subset fonts to reduce file size
 * - Preload critical font weights
 * - Variable fonts for flexibility
 */
---

<!-- Preload critical font files -->
<link rel="preload" href="/fonts/inter-var.woff2" as="font" type="font/woff2" crossorigin>

<!-- Font face declarations with optimized loading -->
<style>
  /* Inter Variable Font - Primary font family */
  @font-face {
    font-family: 'Inter';
    font-style: normal;
    font-weight: 100 900;
    font-display: swap;
    src: url('/fonts/inter-var.woff2') format('woff2-variations'),
         url('/fonts/inter-var.woff2') format('woff2');
    unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, 
                   U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, 
                   U+2212, U+2215, U+FEFF, U+FFFD;
  }
  
  /* Fallback for browsers that don't support variable fonts */
  @font-face {
    font-family: 'Inter';
    font-style: normal;
    font-weight: 400;
    font-display: swap;
    src: url('/fonts/inter-regular.woff2') format('woff2'),
         url('/fonts/inter-regular.woff') format('woff');
    unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, 
                   U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, 
                   U+2212, U+2215, U+FEFF, U+FFFD;
  }
  
  @font-face {
    font-family: 'Inter';
    font-style: normal;
    font-weight: 500;
    font-display: swap;
    src: url('/fonts/inter-medium.woff2') format('woff2'),
         url('/fonts/inter-medium.woff') format('woff');
    unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, 
                   U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, 
                   U+2212, U+2215, U+FEFF, U+FFFD;
  }
  
  @font-face {
    font-family: 'Inter';
    font-style: normal;
    font-weight: 600;
    font-display: swap;
    src: url('/fonts/inter-semibold.woff2') format('woff2'),
         url('/fonts/inter-semibold.woff') format('woff');
    unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, 
                   U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, 
                   U+2212, U+2215, U+FEFF, U+FFFD;
  }
  
  @font-face {
    font-family: 'Inter';
    font-style: normal;
    font-weight: 700;
    font-display: swap;
    src: url('/fonts/inter-bold.woff2') format('woff2'),
         url('/fonts/inter-bold.woff') format('woff');
    unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, 
                   U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, 
                   U+2212, U+2215, U+FEFF, U+FFFD;
  }
  
  /* Set global font family with proper fallbacks */
  :root {
    --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 
                 Roboto, 'Helvetica Neue', Arial, sans-serif, 
                 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';
    
    /* Font feature settings for better rendering */
    font-feature-settings: 'liga' 1, 'calt' 1, 'kern' 1;
    
    /* Optimize font rendering */
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
  }
  
  /* Apply Inter to body and common elements */
  body {
    font-family: var(--font-sans);
    font-optical-sizing: auto;
  }
  
  /* Ensure proper font weights are used */
  h1, h2, h3, h4, h5, h6 {
    font-weight: 700;
    font-variation-settings: 'wght' 700;
  }
  
  strong, b {
    font-weight: 600;
    font-variation-settings: 'wght' 600;
  }
  
  /* Loading state to prevent FOIT */
  .fonts-loading body {
    opacity: 0;
  }
  
  .fonts-loaded body {
    opacity: 1;
    transition: opacity 0.3s ease;
  }
  
  /* Fallback for system fonts if custom fonts fail */
  @supports not (font-variation-settings: normal) {
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 
                   Roboto, 'Helvetica Neue', Arial, sans-serif;
    }
  }
</style>

<!-- Font loading script for optimal performance -->
<script>
  // Font loading optimization
  if ('fonts' in document) {
    // Modern font loading API
    document.fonts.ready.then(() => {
      document.documentElement.classList.add('fonts-loaded');
      document.documentElement.classList.remove('fonts-loading');
    });
    
    // Add loading class immediately
    document.documentElement.classList.add('fonts-loading');
    
    // Timeout fallback to prevent invisible text
    setTimeout(() => {
      document.documentElement.classList.add('fonts-loaded');
      document.documentElement.classList.remove('fonts-loading');
    }, 3000);
  } else {
    // Fallback for older browsers - fonts load normally
    document.documentElement.classList.add('fonts-loaded');
  }
  
  // Preload fonts on interaction for better performance
  const preloadFonts = () => {
    const links = [
      '/fonts/inter-medium.woff2',
      '/fonts/inter-semibold.woff2',
      '/fonts/inter-bold.woff2'
    ];
    
    links.forEach(href => {
      const link = document.createElement('link');
      link.rel = 'prefetch';
      link.as = 'font';
      link.type = 'font/woff2';
      link.href = href;
      link.crossOrigin = 'anonymous';
      document.head.appendChild(link);
    });
  };
  
  // Preload additional weights on first interaction
  ['click', 'touchstart', 'mouseover'].forEach(event => {
    document.addEventListener(event, preloadFonts, { once: true, passive: true });
  });
</script>